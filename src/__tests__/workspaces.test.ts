/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { expect, test } from "vitest";
import { Dub } from "../index.js";
import { createTestHTTPClient } from "./testclient.js";

test("Workspaces Get Workspace", async () => {
  const testHttpClient = createTestHTTPClient("getWorkspace");

  const dub = new Dub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    token: "DUB_API_KEY",
  });

  const result = await dub.workspaces.get({
    idOrSlug: "<value>",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    id: "<id>",
    name: "<value>",
    slug: "<value>",
    logo: null,
    inviteCode: "<value>",
    plan: "business max",
    stripeId: "<id>",
    billingCycleStart: 5588.34,
    paymentFailedAt: "<value>",
    stripeConnectId: "<id>",
    totalLinks: 5442.21,
    usage: 5212.35,
    usageLimit: 9699.61,
    linksUsage: 4580.49,
    linksLimit: 4508.24,
    salesUsage: 2627.95,
    salesLimit: 2134.57,
    domainsLimit: 9371.46,
    tagsLimit: 4381.42,
    foldersUsage: 8013.73,
    foldersLimit: 788.88,
    usersLimit: 2199.56,
    aiUsage: 3134.64,
    aiLimit: 945.89,
    conversionEnabled: false,
    dotLinkClaimed: false,
    partnersEnabled: true,
    createdAt: "1737210463283",
    users: [
      {
        role: "member",
        defaultFolderId: "<id>",
      },
      {
        role: "owner",
        defaultFolderId: "<id>",
      },
    ],
    domains: [
      {
        slug: "acme.com",
        primary: false,
        verified: false,
      },
    ],
    store: {
      "key": "<value>",
      "key1": "<value>",
    },
    allowedHostnames: [
      "dub.sh",
    ],
  });
});

test("Workspaces Update Workspace", async () => {
  const testHttpClient = createTestHTTPClient("updateWorkspace");

  const dub = new Dub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    token: "DUB_API_KEY",
  });

  const result = await dub.workspaces.update("<value>");
  expect(result).toBeDefined();
  expect(result).toEqual({
    id: "<id>",
    name: "<value>",
    slug: "<value>",
    logo: null,
    inviteCode: "<value>",
    plan: "advanced",
    stripeId: "<id>",
    billingCycleStart: 5971.29,
    paymentFailedAt: "<value>",
    stripeConnectId: "<id>",
    totalLinks: 3446.2,
    usage: 9914.64,
    usageLimit: 6276.9,
    linksUsage: 4888.52,
    linksLimit: 9840.08,
    salesUsage: 540.62,
    salesLimit: 8965.01,
    domainsLimit: 4468.63,
    tagsLimit: 3115.07,
    foldersUsage: 2494.4,
    foldersLimit: 1395.79,
    usersLimit: 7892.75,
    aiUsage: 8898.38,
    aiLimit: 3024.61,
    conversionEnabled: true,
    dotLinkClaimed: false,
    partnersEnabled: false,
    createdAt: "1726415064687",
    users: [],
    domains: [
      {
        slug: "acme.com",
        primary: false,
        verified: false,
      },
      {
        slug: "acme.com",
        primary: false,
        verified: false,
      },
      {
        slug: "acme.com",
        primary: false,
        verified: false,
      },
    ],
    store: {
      "key": "<value>",
      "key1": "<value>",
      "key2": "<value>",
    },
    allowedHostnames: [
      "dub.sh",
    ],
  });
});
