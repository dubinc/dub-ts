// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package logging

import "net/http"

// OASOperation contains a singular OAS operation. An operation can have one or
// more calls.
type OASOperation struct {
	// Underlying HTTP calls for the operation.
	calls []*OASOperationCall

	// Directory that contains HTTP request and response logs.
	dir *HTTPFileDirectory

	// Operation identifier as defined in OAS.
	id string

	// HTTP method for the operation, such as GET.
	method string

	// URL path for the operation, such as /path.
	path string

	// TODO: Add group
}

// NewOASOperation creates a new OASOperation.
func NewOASOperation(dir *HTTPFileDirectory, operationId string, method string, path string) *OASOperation {
	operationCalls := dir.OperationCallCount(operationId)
	result := &OASOperation{
		calls:  make([]*OASOperationCall, 0, operationCalls),
		dir:    dir,
		id:     operationId,
		method: method,
		path:   path,
	}

	for i := range operationCalls {
		// Start at 1 for human consumption.
		result.calls = append(result.calls, NewOASOperationCall(result, i+1))
	}

	return result
}

// CallCount returns the number of calls to an operation.
func (o *OASOperation) CallCount() int64 {
	return int64(len(o.calls))
}

// Id returns the operation identifier as defined in OAS.
func (o *OASOperation) Id() string {
	return o.id
}

// Method returns the HTTP method for the operation, such as GET.
func (o *OASOperation) Method() string {
	return o.method
}

// Path returns the URL path for the operation, such as /path.
func (o *OASOperation) Path() string {
	return o.path
}

// RawRequest returns the raw HTTP request contents as dumped by
// [httputil.DumpRequest].
func (o *OASOperation) RawRequest(call int64) ([]byte, error) {
	return o.dir.RawRequest(o.id, call)
}

// RawResponse returns the raw HTTP response contents as dumped by
// [httputil.DumpResponse].
func (o *OASOperation) RawResponse(call int64) ([]byte, error) {
	return o.dir.RawResponse(o.id, call)
}

// Request returns the parsed HTTP request contents.
func (o *OASOperation) Request(call int64) (*http.Request, error) {
	return o.dir.Request(o.id, call)
}

// Response returns the parsed HTTP response contents.
func (o *OASOperation) Response(call int64) (*http.Response, error) {
	return o.dir.Response(o.id, call)
}
