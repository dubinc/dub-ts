// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package logging

import (
	"fmt"
	"io"
	"log/slog"
)

func NewLogger(w io.Writer, formatStr string, levelStr string) (*slog.Logger, error) {
	level, err := levelFromString(levelStr)

	if err != nil {
		return nil, err
	}

	format, err := formatFromString(formatStr)

	if err != nil {
		return nil, err
	}

	handlerOpts := &slog.HandlerOptions{
		Level: level,
	}

	var handler slog.Handler

	switch format {
	case FormatJSON:
		handler = slog.NewJSONHandler(w, handlerOpts)
	case FormatText:
		handler = slog.NewTextHandler(w, handlerOpts)
	default:
		return nil, fmt.Errorf("unimplemented format: %s", format)
	}

	return slog.New(handler), nil
}
